Release Notes for Version 1.0

Release date: 2018-01-19
Intended compatibility: WSUS Offline Update Version 11.1 and later

Changes in this version:

After about one year in beta status, this version is now designated
version 1.0.


Bugfix: The function download_single_file_failsafe was revised to delete
partial files between tries.

    The function download_single_file_failsafe is used to download the
    four virus definition files mpam-fe.exe, mpam-fex64.exe, mpas-fe.exe,
    and mpas-feX64.exe and the WSUS catalog file wsusscn2.cab in one
    pass. If the download fails, it is started new from scratch. This is
    necessary, because there are often different versions of the same
    file in the Microsoft content delivery network. Partial files must
    be removed between tries, but a bug caused them to persist.

    This was reported by 8marti in
    http://forums.wsusoffline.net/viewtopic.php?f=9&t=7069 .


Bugfix: The declaration of indexed arrays with "declare -ag" was removed.

    The declaration of arrays with "declare -ag" can lead to "unbound
    variable" errors in old versions of the bash, e.g. GNU bash, version
    4.2.25, from Ubuntu 12.04 LTS. This error does not happen in more
    recent versions of the bash.

    But, since this declaration with "declare -ag" is not really
    necessary, it was removed now.

    This was reported by ede70 in
    http://forums.wsusoffline.net/viewtopic.php?f=9&t=7402 .


The Wget option --unlink was removed.

    The option --unlink is useful, if hard links are used to create
    local snapshots or backups, but this option is not available in old
    versions of GNU Wget.


A new standalone script rebuild-integrity-database.bash was added.

    The integrity database consists of hashdeep checksum files in the
    directory wsusoffline/client/md. They are accessed twice during
    each run:

    - Before each download, the existing files are verified by
      recalculating their hashes and comparing them to the values in
      the integrity database.

    - After each download, the hashes files are deleted and rebuilt with
      the new folder contents. This allows a simple integrity test:
      Most security downloads include the SHA-1 hash in the filename,
      as a hexadecimal number of 40 digits length. After calculating
      the hashes with hashdeep, the SHA-1 hashes can be compared to the
      expected values.

    Recalculating all hashes twice during each run causes a lot
    of processing. For convenience, the usage of the integrity
    database can be disabled in the preferences files. The new script
    rebuild-integrity-database.bash allows to recreate all checksum
    files at a later time.

    However, this script is optional â€“ you can just keep the
    regular schedule, as it was established by the Windows script
    DownloadUpdates.cmd.

    This was requested by AlBundy in
    http://forums.wsusoffline.net/viewtopic.php?f=9&t=7338 ; see also the
    discussion in http://forums.wsusoffline.net/viewtopic.php?f=9&t=7331 .


Support for .NET Framework 4.7.1 was added.


Support for Office 2007 was removed.


Internal Changes

    The functions remove_german_language_support and
    remove_english_language_support now keep the file modification date.

    The new filter function todos_line_endings changes the output of
    hashdeep to DOS line endings on the fly.

    The functions trash_file and unpack_wsus_catalog_file were revised
    to produce more output.


The copyright was updated to 2018.

    Source files are still licensed on a per-file basis, since this is
    often recommended, e.g. by the GPL itself (see the section "How to
    Apply These Terms to Your New Programs" at the end of the GPL).

    The version information, release date and intended compatibility
    are removed from most files. They are now only in the scripts
    update-generator.bash and download-updates.bash, in the files
    version-history.txt and installed-version.txt, and in this file.

    This should allow smaller, incremental updates in the future.
